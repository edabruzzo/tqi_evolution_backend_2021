<html xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<head th:replace="~{base :: head}"></head>
<body>
<div th:replace="~{base :: logo}"></div>

<div class="container">
    <div th:replace="~{base :: titulo('Requisicao Novo Emprestimo')}"></div>




    <div sec:authorize="hasRole('FUNCIONARIO')"  class="card mt-3">

        <form th:object="${solicitacaoClienteEmprestimoDTO}" class="card-body" action="@{/solicitacao-emprestimo/novo}" method="POST">
            <div class="form-group">
                <label for="nome">Cliente</label>
                <input th:field="*{nome}" th:errorClass="is-invalid" class="form-control" placeholder="nome do cliente"/>
                <small>Informa qual o nome do cliente.</small>
                <div class="invalid-feedback" th:errors="*{nome}">
                    Erros do nome do cliente
                </div>
            </div>
            <div class="form-group">
                <label for="cpf">CPF</label>
                <input th:field="*{cpf}" th:errorClass="is-invalid" class="form-control" placeholder="CPF cliente"/>
                <small>Informe o CPF do cliente.</small>
                <div class="invalid-feedback" th:errors="*{cpf}">
                    Erros no CPF cliente
                </div>
            </div>

          

            <div class="form-group">
                <label for="email">E-mail</label>
                <input th:field="*{email}" th:errorClass="is-invalid" class="form-control" placeholder="E-mail cliente"/>
                <small>Informe o e-mail do cliente.</small>
                <div class="invalid-feedback" th:errors="*{email}">
                    Erros no e-mail cliente
                </div>
            </div>

            <div class="form-group">
                <label for="rg">RG do cliente</label>
                <input th:field="*{rg}" th:errorClass="is-invalid" class="form-control" placeholder="rg do cliente"/>
                <small>Informe o RG do cliente</small>
                <div class="invalid-feedback" th:errors="*{rg}">
                    Erros no RG do cliente
                </div>
            </div>


            
            <div class="form-group">
                <label for="enderecoCompleto">Endereco completo do cliente</label>
                <input th:field="*{enderecoCompleto}" th:errorClass="is-invalid" class="form-control" placeholder="endereco completo do cliente"/>
                <small>Informe o endereço completo do cliente</small>
                <div class="invalid-feedback" th:errors="*{enderecoCompleto}">
                    Erros no endereço completo do cliente
                </div>
            </div>

            <div class="form-group">
                <label for="renda">Renda do cliente</label>
                <input th:field="*{renda}" th:errorClass="is-invalid" class="form-control" placeholder="renda do cliente"/>
                <small>Informe a renda do cliente</small>
                <div class="invalid-feedback" th:errors="*{renda}">
                    Erros na renda do cliente
                </div>
            </div>



            <!-- DADOS DA SOLICITAÇÃO DE EMPRÉSTIMO -->


            <div class="form-group">
                <label for="valor">Valor da solicitação de empréstimo</label>
                <input th:field="*{valor}" th:errorClass="is-invalid" class="form-control" placeholder="valor emprestimo solicitado pelo cliente"/>
                <small>Informe o valor do empréstimo solicitado pelo cliente</small>
                <div class="invalid-feedback" th:errors="*{valor}">
                    Erros no valor solicitado pelo cliente
                </div>
            </div>


            <div class="form-group">
                <label for="dataPrimeiraParcela">Valor da solicitação de empréstimo</label>
                <input th:field="*{dataPrimeiraParcela}" th:errorClass="is-invalid" class="form-control" placeholder="primeira parcela do emprestimo solicitado pelo cliente"/>
                <small>Informe a data da primeira parcela do empréstimo solicitado pelo cliente</small>
                <div class="invalid-feedback" th:errors="*{dataPrimeiraParcela}">
                    Erros na data da primeira parcela do empréstimo solicitado pelo cliente
                </div>
            </div>


            <div class="form-group">
                <label for="numeroMaximoParcelas">Número de parcelas do empréstimo</label>
                <input th:field="*{numeroMaximoParcelas}" th:errorClass="is-invalid" class="form-control" placeholder="número de parcelas do emprestimo solicitado pelo cliente"/>
                <small>Informe o número de parcelas do empréstimo solicitado pelo cliente</small>
                <div class="invalid-feedback" th:errors="*{numeroMaximoParcelas}">
                    Erros no número de parcelas do empréstimo solicitado pelo cliente
                </div>
            </div>

            <!-- DADOS DA SOLICITAÇÃO DE EMPRÉSTIMO -->

            <div class="form-group">
                <label for="senha">Defina uma senha para o cliente</label>
                <textarea th:field="*{senha}" class="form-control" placeholder="Defina uma senha forte para o cliente."></textarea>
            </div>
            <button class="btn btn-primary" type="submit">Solicitar empréstimo</button>
        </form>
    </div>



    <div sec:authorize="authenticated()" th:switch="${listaEmprestimos}">
        <h2 th:case="null">Nenhum empréstimo a ser exibido!</h2>
        <div th:case="*">
            <h2>Lista de Empréstimos</h2>
            <table>
                <thead>
                <tr>
                    <th>Id Empréstimo</th>
                    <th>Valor</th>
                    <th>Data da primeira parcela</th>
                    <th>Número de parcelas</th>
                    <th>Id do Cliente</th>
                    <th>CPF do Cliente</th>
                    <th>Edit</th>
                    <th>Delete</th>


                </tr>
                </thead>
                <tbody>
                <tr th:each="emprestimoCliente : ${listaEmprestimos}">
                    <td th:text="${emprestimoCliente.id}"></td>
                    <td th:text="${emprestimoCliente.valor}"></td>
                    <td th:text="${emprestimoCliente.dataPrimeiraParcela}"></td>
                    <td th:text="${emprestimoCliente.numeroMaximoParcelas}"></td>
                    <td sec:authorize="hasRole('FUNCIONARIO')"
                        th:text="${emprestimoCliente.numeroMaximoParcelas}"></td>
                    <td th:text="${#authentication.get}"></td>
                    <td><a sec:authorize="hasRole('SUPER_ADMIN')" th:href="@{/edit/{id}(id=${emprestimoCliente.id})}">Edit</a></td>
                    <td><a sec:authorize="hasRole('SUPER_ADMIN')" th:href="@{/delete/{id}(id=${emprestimoCliente.id})}">Delete</a></td>
                </tr>
                </tbody>
            </table>
        </div>
        <p><a href="/signup">Add a new user</a></p>
    </div>




</div>
</body>
</html>